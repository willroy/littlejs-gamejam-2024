<!DOCTYPE html><head>
<title>LittleJS Starter Project</title>
<meta charset=utf-8>
<meta name=apple-mobile-web-app-capable content=yes>
<meta name=mobile-web-app-capable content=yes>
</head><body>
<input type="file" id="uploadWorld" value="Import" hidden/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- LittleJS Engine -->
<script src=lib/engineDebug.js?209></script>
<script src=lib/engineUtilities.js?209></script>
<script src=lib/engineSettings.js?209></script>
<script src=lib/engineObject.js?209></script>
<script src=lib/engineDraw.js?209></script>
<script src=lib/engineInput.js?209></script>
<script src=lib/engineAudio.js?209></script>
<script src=lib/engineTileLayer.js?209></script>
<script src=lib/engineParticles.js?209></script>
<script src=lib/engineMedals.js?209></script>
<script src=lib/engineWebGL.js?209></script>
<script src=lib/engine.js?209></script>

<script src=index.js?209></script>

<!-- Display Classes -->
<script src=src/display.js?209></script>
<script src=src/display/world.js?209></script>
<script src=src/display/menu.js?209></script>

<!-- Helper Classes -->
<script src=src/helper/image.js?209></script>

<!-- Entity Classes -->
<script src=src/entity/entity.js?209></script>
<script src=src/entity/objectEntity.js?209></script>
<script src=src/entity/dialogEntity.js?209></script>
<script src=src/entity/physicsObjectEntity.js?209></script>
<script src=src/entity/actionEntity.js?209></script>
<script src=src/entity/controllerEntity.js?209></script>

<!-- Action Classes -->
<script>
  var actionsGeneric = [
    "DialogAction",
    "ItemPickupAction",
  ];

  var actionsSpecific = [
    "IntroDialougeAction",
    "FountainDialougeAction",
    "BeaverDialougeAction",
  ];

  // i feel like the below should be a crime

  var actions = []

  $( document ).ready(function() {
    for ( var i = 0; i < actionsGeneric.length; i++ ) {
      var script = document.createElement('script');
      var scriptName = actionsGeneric[i].charAt(0).toLowerCase() + actionsGeneric[i].slice(1);
      script.src = "src/actionsGeneric/"+scriptName+".js?209";
      document.head.appendChild(script);
    }
    for ( var i = 0; i < actionsSpecific.length; i++ ) {
      var script = document.createElement('script');
      var scriptName = actionsSpecific[i].charAt(0).toLowerCase() + actionsSpecific[i].slice(1);
      if ( i == actionsSpecific.length-1 ) {
        script.onload = function () { createActionsList(); };
      }
      script.src = "src/actionsSpecific/"+scriptName+".js?209";
      document.head.appendChild(script);
    }
  });

  function createActionsList() {
    var actionsTmp = [];
    actionsTmp.push.apply(actionsTmp, actionsGeneric);
    actionsTmp.push.apply(actionsTmp, actionsSpecific);

    for ( var i = 0; i < actionsTmp.length; i++ ) {
      var actionString = actionsTmp[i];
      actions[actionString] = eval(actionsTmp[i]);
    }
  }
</script>

<script>
	$(document).keyup(function (e) {
	  if (e.key == "_") $("#uploadWorld").click(); 
    if (e.key == "+") display.loaded.downloadJSON();
	});  

	$('#uploadWorld').change(function() {
    var files = document.getElementById('uploadWorld').files;
    var reader = new FileReader();

    reader.onload = function(e) {
      display.loaded.uploadJSON(reader.result);
    }

    reader.readAsText(files[0]);
  }); 
</script>
</body>
</html>
